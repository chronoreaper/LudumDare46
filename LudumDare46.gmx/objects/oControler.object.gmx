<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>controler</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///initial setup
randomize()

audio_play_sound(sMenu,100,true)

globalvar pixelFont,pixelBlock,pixelSquish;
pixelFont=font_add_sprite_ext(letters,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890.?![]()/\&lt;&gt;:-+'%|,",true,1)
pixelBlock=font_add_sprite_ext(lettersBlock,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890.?![]()/\&lt;&gt;:-+'%|,",true,1)
pixelSquish=font_add_sprite_ext(lettersBlock,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890.?![]()/\&lt;&gt;:-+'%|,",true,-1)
gold = 12
wave = 0
points = 0

selected = noone

message = ""
messageAlpha = 0

largeMessage = ""
largeMessageAlpha = 0

holdSpace = 0

instance_create(x + 7,y + 7,oDemonLord)

//set gui
display_set_gui_size(room_width,room_height)

//set mouse
window_set_cursor(cr_none);

//start up menu stuff
startUp = 1
startUpFade = 5

tutorial = 0

redFade = 0
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///build units set up
toBuildList = ds_list_create()
toBuildIndex = 0
toBuild = noone;
ds_list_add(toBuildList,noone)
createNewBuildOption(oSlime)
createNewBuildOption(oGoblin)
createNewBuildOption(oWhisp)
createNewBuildOption(oEyeBat)
createNewBuildOption(oSpecter)
createNewBuildOption(oCyclops)
createNewBuildOption(oDragon)
createNewBuildOption(oLesserDemon)
createNewBuildOption(oBeholder)
createNewBuildOption(oWall)
createNewBuildOption(oBlade)
createNewBuildOption(oTower)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///wave unit list
waveList = ds_queue_create()
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///create random room set up
repeat(18)
{
var rx = irandom(room_width/15)*15+7
var ry = irandom(room_height/15)*15+7
if !place_meeting(rx,ry,oUnit)
    instance_create(rx,ry,oTree)
}

repeat(10)
{
var rx = irandom(room_width/15)*15+7
var ry = irandom(room_height/15)*15+7
if !place_meeting(rx,ry,oUnit) &amp;&amp; ! place_meeting(rx,ry,oDeco)
    var inst = instance_create(rx,ry,oGrass);
    if inst!=noone{
    inst.image_index = irandom(inst.image_number)
    }
}
repeat(5)
{
var rx = irandom(room_width/15)*15+7
var ry = irandom(room_height/15)*15+7
if !place_meeting(rx,ry,oUnit) &amp;&amp; ! place_meeting(rx,ry,oDeco)
    var inst = instance_create(rx,ry,oStone);
    if inst!=noone{
    inst.image_index = irandom(inst.image_number)
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///shortcut keys
shortcut_key[0] = ord("1")
shortcut_key[1] = ord("2")
shortcut_key[2] = ord("3")
shortcut_key[3] = ord("4")
shortcut_key[4] = ord("5")
shortcut_key[5] = ord("6")
shortcut_key[6] = ord("7")
shortcut_key[7] = ord("8")
shortcut_key[8] = ord("9")
shortcut_key[9] = ord("0")
shortcut_key[10] = vk_subtract
shortcut_key[11] = vk_add
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>audio_play_sound(sGameSong,100,true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///create enemies
//spawn along the side of the room
if (ds_queue_size(waveList)&gt;0){
    var randx = choose(-15,room_width+15,0,0)
    var randy = choose(-15,room_height+15)
    if randx = 0
        randx = irandom(room_width)
    else
        randy = irandom(room_height)
    instance_create(randx,randy,ds_queue_dequeue(waveList))
    alarm[1] = max(5,30*2-(wave*2))
    gold+=2
}
else alarm[0] = 30*(20 + min(wave*4,40))
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///add enemy units
wave ++
repeat(wave)
    ds_queue_enqueue(waveList,oVillager)
if wave&gt;2
repeat(ceil(wave - 2)/2)
    ds_queue_enqueue(waveList,oArcher) 
if wave &gt; 3
repeat(ceil(wave - 3)/2)
    ds_queue_enqueue(waveList,oGuard)    
if wave &gt; 6
repeat(ceil(wave - 6)/2)
    ds_queue_enqueue(waveList,oMercenary)  
if wave &gt; 8
repeat(ceil(wave - 8)/3)
    ds_queue_enqueue(waveList,oBeserker)  
if wave &gt; 10
repeat(ceil(wave - 10)/5)
    ds_queue_enqueue(waveList,oWizard)  
if wave &gt; 12
repeat(ceil(wave - 12)/5)
    ds_queue_enqueue(waveList,oHero)  
if wave &gt; 14
repeat(ceil(wave - 14)/6)
    ds_queue_enqueue(waveList,oAngel)  
setLargeMessage("WAVE "+ string(wave))
//audio_play_sound(sNextWave,50,false)
alarm[1] = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///player control
if !instance_exists(oGameOver) &amp;&amp; !startUp{//you havent lost yet
if mouse_check_button_pressed(mb_right)
{
    if toBuild !=noone
    if !place_meeting(round((mouse_x-7)/15)*15 + 7,round((mouse_y-7)/15)*15 + 7,oUnit)
    &amp;&amp;!place_meeting(round((mouse_x-7)/15)*15 + 7,round((mouse_y-7)/15)*15 + 7,oSummonCircle)
    {
        var price = buildCost(toBuild)
        if gold &gt;= price
        {
            //remove decorations
            var deco =  instance_place(round((mouse_x-7)/15)*15 + 7,round((mouse_y-7)/15)*15 + 7,oDeco)
            instance_destroy(deco)
            gold -=price
            var inst = instance_create(round((mouse_x-7)/15)*15 + 7,round((mouse_y-7)/15)*15 + 7,oSummonCircle);
            inst.toCreate = toBuild
            inst.image_speed = min(0.1,((wave/5+1)/price))
            audio_play_sound(sSummon,50,false)
        }
        else setMessage("Not ENough Souls")
    }else setMessage("CaN't SummoN Here")

}

//select units from selection
if mouse_check_button_pressed(mb_left){
    toBuildIndex= 0
    var inst = instance_place(mouse_x,mouse_y,oUnitSelection)
    if inst!=noone
        toBuildIndex=inst.selection
    toBuild = toBuildList[|toBuildIndex]
    
    //damage enemies
    /*inst = instance_place(mouse_x,mouse_y,oEnemy)
    if inst!=noone
        inst.pow--*/
}

for(var i = 0;i&lt;12;i++){
    if keyboard_check_pressed(shortcut_key[i]){
        toBuildIndex= i + 1
        toBuild = toBuildList[|toBuildIndex]
    }
}

if mouse_wheel_up()
{
    toBuildIndex ++
    if toBuildIndex &gt;= ds_list_size(toBuildList)
        toBuildIndex = 0
    toBuild = toBuildList[|toBuildIndex]
}

if mouse_wheel_down(){
    toBuildIndex --
    if toBuildIndex &lt; 0 
        toBuildIndex =  ds_list_size(toBuildList) - 1
    toBuild = toBuildList[|toBuildIndex]
}

//skip wait
if alarm_get(0)&gt;1
&amp;&amp; keyboard_check(vk_space){
    holdSpace++
    if holdSpace &gt; 30
    {
        holdSpace = 30
        points += floor(alarm_get(0)/30)
        alarm[0] = 1
    }
}
else
    holdSpace = 0
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///colect souls
if !instance_exists(oGameOver){//you havent lost yet
var inst =  instance_place(mouse_x,mouse_y,oSoul)
if inst!=noone{
    instance_destroy(inst)
    gold++
    points++
    audio_play_sound(sCollect,10,false)
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///check if you lost

if !instance_exists(oGameOver){//you havent lost yet
    if !instance_exists(oDemonLord){
        instance_create(x,y,oGameOver)
        audio_stop_sound(sGameSong)
        audio_play_sound(sGameOver,100,false)
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>ds_list_destroy(toBuildList)
ds_queue_destroy(waveList)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="73">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///draw mouse
draw_sprite(mouse,0,mouse_x,mouse_y)

var allign = fa_left
var xOffset = 10

if mouse_x &gt; room_width - 100
{
    allign = fa_right
    xOffset = -10
}

//draw over selection
var inst = instance_place(mouse_x,mouse_y,oUnitSelection);
if inst !=noone{
    var unit = toBuildList[|inst.selection]
    if unit !=noone{
        draw_set_colour(c_white)
        draw_set_halign(allign)
        draw_set_font(pixelBlock)
        draw_text(mouse_x+xOffset,mouse_y,sprite_get_name(object_get_sprite(unit)))
    }
}
else{
//draw over unit
inst = instance_place(round((mouse_x-7)/15)*15 + 7,round((mouse_y-7)/15)*15 + 7,oUnit);
if inst!=noone{
    draw_set_colour(c_white)
    draw_set_halign(allign)
    draw_set_font(pixelBlock)
    draw_text(mouse_x+xOffset,mouse_y,string_upper(sprite_get_name(inst.sprite_index)))
    if toBuildIndex !=0
        sprite_index = cannotplace
}
else if place_meeting(round((mouse_x-7)/15)*15 + 7,round((mouse_y-7)/15)*15 + 7,oSummonCircle)
    sprite_index = cannotplace
else
    sprite_index = controler
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///start up menu
if startUp{
    draw_sprite_ext(Logo,0,display_get_gui_width()/2,5,2,2,0,-1,1)
            
    if startUpFade &lt; 0{
        if keyboard_check_pressed(vk_anykey)||mouse_check_button_pressed(mb_any)
        {
            startUp = 0
            //start timer to create enemies
            alarm[0] = 30*30
            setLargeMessage("Keep The DEMONLORD Alive!")
            audio_stop_sound(sMenu)
            alarm[2] = 30
        }
    }
    
    draw_set_alpha(1)
    draw_set_colour(c_white)
    draw_set_halign(fa_center)
    draw_set_font(pixelBlock)
    draw_text_transformed(display_get_gui_width()/2,display_get_gui_height()*3/4,"Press aNy key to start",1,1,0)
    
    draw_set_alpha(startUpFade)
    draw_set_colour(c_black)
    draw_rectangle(-1,-1,display_get_gui_width(),display_get_gui_height(),false)
    startUpFade-=0.1
    
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///draw stats
if !instance_exists(oGameOver){
if !startUp{
draw_set_alpha(1)
draw_set_colour(c_aqua)
draw_set_font(pixelBlock)
draw_set_halign(fa_left)
draw_sprite(soul,0,7,7)
draw_text(15,5,"Soul:" + string(gold))
draw_set_colour(c_orange)
draw_text(5,15,"Score:"+string(points))
draw_text(5,25,"Wave:"+string(wave))
if (alarm_get(0) &gt; 0)
    draw_text(5,35,"Next Wave: "+string(floor(alarm_get(0)/30)))
else
    draw_text(5,35,"Next Wave: Now")
draw_set_colour(c_white)
draw_text(5,room_height-50,"SummoN SelectioN")
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///draw_mouse_controls
if !instance_exists(oGameOver)
if !startUp{
draw_sprite(mouseIcon,0,view_wview-15,15)
//draw_sprite(mouseIcon,1,view_wview-15,30)
draw_sprite(mouseIcon,2,view_wview-15,30)
draw_sprite(oSpacebar,0,view_wview-15,45)
draw_set_halign(fa_right)
draw_set_font(pixelBlock)
draw_set_colour(c_white)
draw_set_alpha(1)
//draw_text(view_wview-20,25,"Change Summon Selection")
if toBuild == noone
    draw_text(view_wview-20,10,"Select a summon on the bottom")
else{
    draw_text(view_wview-20,10,"Cancel Summon")
    draw_text(view_wview-20,25,"Summon")
}
    draw_text(view_wview-20,40,"Skip to Next wave")
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///draw message
if !instance_exists(oGameOver){
    if messageAlpha&gt;0{
    draw_set_alpha(messageAlpha)
    draw_set_colour(c_red)
    draw_set_halign(fa_center)
    draw_set_font(pixelBlock)
    draw_text(display_get_gui_width()/2,20,message)
    messageAlpha -=0.1
    }
}

if !instance_exists(oGameOver){
    if largeMessageAlpha&gt;0{
    draw_set_alpha(largeMessageAlpha)
    draw_set_colour(c_white)
    draw_set_halign(fa_center)
    draw_set_font(pixelBlock)
    draw_text_transformed(display_get_gui_width()/2,display_get_gui_height()/2,largeMessage,2,2,0)
    largeMessageAlpha -=0.1
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///draw hit screen
if redFade&gt;0{
    draw_set_alpha(min(0.3,redFade))
    draw_set_colour(c_red)
    draw_rectangle(-1,-1,display_get_gui_width(),display_get_gui_height(),false)
    redFade-=0.1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///draw to build
draw_sprite(sprite_index,0,round((mouse_x-7)/15)*15 + 7,round((mouse_y-7)/15)*15 + 7)
if toBuild!=noone{
    draw_sprite_ext(object_get_sprite(toBuild),0,round((mouse_x-7)/15)*15 + 7,round((mouse_y-7)/15)*15 + 7,1,1,0,-1,0.5)
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
